# PDF文本检索与高亮工具

这是一个基于Web的PDF文本检索与高亮标注工具，可以帮助用户在PDF文件中查找特定词语并进行高亮标注，同时提供原始PDF和高亮后PDF的对比显示。

## 功能特点

- 📄 **PDF文件上传**：支持上传本地PDF文件
- 🔍 **文本检索**：在PDF文件中搜索指定词语
- 🖍️ **高亮标注**：自动高亮标注所有匹配的文本
- 📊 **双窗口对比**：并排显示原始PDF和高亮后的PDF
- 📥 **下载功能**：支持下载高亮标注后的PDF文件
- 📱 **响应式设计**：适配不同屏幕尺寸

## 技术栈

- HTML5
- CSS3
- JavaScript (ES6+)
- PDF.js (用于PDF渲染和文本提取)
- PDF-lib (用于PDF修改和高亮标注)

## 使用方法

1. **上传PDF文件**：
   - 点击"选择PDF文件"按钮
   - 从本地选择要处理的PDF文件
   - 文件上传后，左侧窗口将显示原始PDF

2. **检索和高亮文本**：
   - 在搜索框中输入要查找的词语
   - 可选：勾选"区分大小写"进行精确匹配
   - 可选：勾选"调试模式"查看高亮位置的详细信息
   - 选择高亮模式：
     - **直接高亮显示**：在原始PDF上覆盖高亮层（类似WPS查找功能）
     - **生成高亮PDF**：创建一个新的PDF文件，包含高亮标注
   - 可选：选择高亮颜色（默认为黄色）
   - 点击"检索并高亮"按钮
   - 系统将在PDF中搜索所有匹配的文本并进行高亮标注

3. **浏览搜索结果**：
   - 使用"上一个"和"下一个"按钮在搜索结果之间跳转
   - 当前选中的结果将以红色高亮显示
   - 其他结果使用您选择的颜色高亮显示

4. **浏览PDF**：
   - 使用每个窗口下方的"上一页"和"下一页"按钮浏览PDF内容
   - 页码信息显示当前页面和总页数

5. **下载高亮PDF**：
   - 完成高亮标注后（仅在"生成高亮PDF"模式下）
   - 点击"下载高亮后的PDF"按钮
   - 下载的PDF文件将包含所有高亮标注

6. **清除高亮**：
   - 点击"清除高亮"按钮可以清除当前的高亮标注
   - 可以进行新的搜索

## 项目结构

```
PDF文本检索与高亮工具/
├── index.html          # 主HTML文件
├── styles.css          # 样式文件
├── script.js           # JavaScript功能实现
└── README.md           # 项目说明文档
```

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 注意事项

1. 本工具完全在浏览器端运行，不会上传文件到服务器，保证文件隐私安全
2. 处理大型PDF文件时可能需要较长时间，请耐心等待
3. 高亮标注基于文本匹配，对于扫描版PDF（图片格式）可能无法正常工作
4. 建议使用现代浏览器以获得最佳体验
5. **调试模式**：如果高亮位置不准确，可以启用调试模式查看详细的坐标信息，帮助诊断问题
6. **两种高亮模式对比**：
   - 直接高亮显示：实时快速，适合快速查找，但不能下载
   - 生成高亮PDF：生成永久标注的PDF文件，可以下载和分享

## 开发说明

如需修改或扩展功能，可以参考以下主要函数：

- `handleFileSelect()`: 处理文件上传
- `searchAndHighlight()`: 搜索和高亮文本
- `createHighlightedPdf()`: 创建高亮PDF
- `renderPage()`: 渲染PDF页面

## 许可证

MIT License
